<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap
PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
"conf/sql-map-2.dtd">

<sqlMap namespace="Migration">

	<update id="createSchemaInfoTable">
		CREATE TABLE SCHEMA_INFO
		(VERSION VARCHAR(40))
	</update>
	
	<update id="dropTransportsTable">
		DROP TABLE TRANSPORT
	</update>

	<update id="addDeployScriptColumn">
		ALTER TABLE CHANNEL 
		ADD 
		   (
		      DEPLOY_SCRIPT 	CLOB DEFAULT NULL
		   )
	</update>
	
	<update id="addShutdownScriptColumn">
		ALTER TABLE CHANNEL 
		ADD 
		   (
		      SHUTDOWN_SCRIPT   CLOB DEFAULT NULL
		   )
	</update>
	
	<update id="addPostprocessorScriptColumn">
		ALTER TABLE CHANNEL 
		ADD 
		   (
		      POSTPROCESSING_SCRIPT   CLOB DEFAULT NULL
		   )
	</update>
	
	<insert id="setInitialSchemaVersion" parameterClass="int">
		INSERT INTO SCHEMA_INFO (VERSION) VALUES (#value#)
	</insert>
	
	<update id="updateSchemaVersion" parameterClass="int">
		UPDATE SCHEMA_INFO SET VERSION = #value#
	</update>
	
</sqlMap>