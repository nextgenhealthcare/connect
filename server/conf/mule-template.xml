<?xml version="1.0" encoding="UTF-8"?>

<mule-configuration id="MirthConfiguration" version="1.0">
	
	<mule-environment-properties embedded="true" recoverable="true">
		<queue-profile persistent="true" maxOutstandingMessages="100000"/>
		<persistence-strategy className="org.mule.util.queue.FilePersistenceStrategy"/>
	</mule-environment-properties>
	
	<agents>
		<agent name="RMI"
			className="org.mule.management.agents.RmiRegistryAgent">
      <properties/>
		</agent>
		<agent name="JMX" className="org.mule.management.agents.JmxAgent">
			<properties>
				<map name="connectorServerProperties">
					<property name="jmx.remote.jndi.rebind" value="true" />
				</map>
			</properties>
		</agent>
	</agents>

	<transformers>
		<transformer name="ByteArrayToString" className="org.mule.transformers.simple.ByteArrayToString" />
		<transformer name="JMSMessageToObject" className="com.webreach.mirth.connectors.jms.transformers.JMSMessageToObject" returnClass="java.lang.String" />
		<transformer name="StringToByteArray" className="org.mule.transformers.simple.StringToByteArray" />
		<transformer name="SOAPRequestToString" className="com.webreach.mirth.connectors.soap.transformers.SOAPRequestToString" />
		<transformer name="ResultMapToXML" className="com.webreach.mirth.server.mule.transformers.ResultMapToXML" />
		<transformer name="ObjectToString" className="org.mule.transformers.simple.ObjectToString"/>
		<transformer name="NoActionTransformer" className="org.mule.transformers.NoActionTransformer"/>
		<transformer name="HttpStringToXML" className="com.webreach.mirth.server.mule.transformers.HttpStringToXML"/>
		<transformer name="HttpRequestToString" className="com.webreach.mirth.server.mule.transformers.HttpRequestToString"/>
	</transformers>

	<interceptor-stack name="default">
		<interceptor className="org.mule.interceptors.LoggingInterceptor" />
		<interceptor className="org.mule.interceptors.TimerInterceptor" />
	</interceptor-stack>

	<model name="Mirth">
	<!-- new descriptors will be added here -->
	
	<mule-descriptor name="MessageSink" implementation="org.mule.components.simple.PassThroughComponent">
		<inbound-router>
			<endpoint address="vm://sink" />
		</inbound-router>
	</mule-descriptor>

	</model>
</mule-configuration>