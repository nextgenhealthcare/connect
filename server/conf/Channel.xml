<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap
PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Channel">
	<typeAlias alias="channel" type="com.webreach.mirth.model.Channel" />
	
	<select id="getChannel" parameterClass="channel" resultClass="channel" >
		SELECT
			ID as id,
			NAME as name,
			DESCRIPTION as description,
			ENABLED as enabled,
			VERSION as version,
			REVISION as revision,
			DIRECTION as direction,
			PROTOCOL as protocol,
			MODE as mode,
			SOURCE_CONNECTOR as sourceConnector,
			DESTINATION_CONNECTORS as destinationConnectors,
			PROPERTIES as properties,
			PREPROCESSING_SCRIPT as preprocessingScript
		FROM CHANNELS
		<dynamic prepend="WHERE">
			<isNotNull prepend="AND" property="id">
				ID=#id#
			</isNotNull>
			<isNotNull prepend="AND" property="name">
				NAME=#name#
			</isNotNull>
		</dynamic>
	</select>
	
	<insert id="insertChannel" parameterClass="channel">
		INSERT INTO
		CHANNELS (ID, NAME, DESCRIPTION, ENABLED, VERSION, REVISION, DIRECTION, PROTOCOL, MODE, SOURCE_CONNECTOR, DESTINATION_CONNECTORS, PROPERTIES, PREPROCESSING_SCRIPT)
		VALUES (#id#, #name#, #description#, #enabled#, #version#, #revision#, #direction#, #protocol#, #mode#, #sourceConnector#, #destinationConnectors#, #properties#, #preprocessingScript#)
	</insert>
	
	<update id="updateChannel" parameterClass="channel">
		UPDATE CHANNELS
		SET NAME = #name#,
			DESCRIPTION = #description#,
			ENABLED = #enabled#,
			VERSION = #version#,
			REVISION = #revision#,
			DIRECTION = #direction#,
			PROTOCOL = #protocol#,
			MODE = #mode#,
			SOURCE_CONNECTOR = #sourceConnector#,
			DESTINATION_CONNECTORS = #destinationConnectors#,
			PROPERTIES = #properties#,
			PREPROCESSING_SCRIPT = #preprocessingScript#
		WHERE ID = #id#
	</update>
	
	<delete id="deleteChannel" parameterClass="channel">
		DELETE FROM CHANNELS
		<dynamic prepend="WHERE">
			<isNotNull prepend="AND" property="id">
				ID=#id#
			</isNotNull>
		</dynamic>
	</delete>
</sqlMap>